<policies>
    <inbound>
        <base />
        <!-- Get managed identity token for Content Safety -->
        <authentication-managed-identity resource="https://cognitiveservices.azure.com" output-token-variable-name="managed-id-access-token" ignore-error="false" />
        <!-- Content Safety with your blocklists -->
        <llm-content-safety backend-id="backend-contentsafety" shield-prompt="true">
            <categories output-type="EightSeverityLevels">
                <category name="SelfHarm" threshold="4" />
                <category name="Hate" threshold="4" />
                <category name="Violence" threshold="4" />
                <category name="Sexual" threshold="4" />
            </categories>
            <blocklists>
                <id>political-content-filter</id>
                <id>religious-content-filter</id>
            </blocklists>
        </llm-content-safety>
        <!-- Return test response -->
        <return-response>
            <set-status code="200" reason="OK" />
            <set-body>{"message": "Content passed safety checks"}</set-body>
        </return-response>
    </inbound>
    <backend>
        <base />
    </backend>
    <outbound>
        <base />
    </outbound>
    <on-error>
        <base />
    </on-error>
</policies>